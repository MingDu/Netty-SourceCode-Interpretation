## Netty_PooledByteBuf_5.PoolArena

### 一. 干什么?

1. Soho卖给了黑石, 一幢楼要出租, 不同需求的客户都来了, 有要大面积的, 有要小工位的, 怎么管?
2. 



### 二. 打算怎么干? 

1. 怎么管? 分开管, 分级管. 

2. 分级是什么, 就像买衣服, 码号都标准化了, 170, 175, 180. S码, M码, L码.  177的买什么码, 往大里靠, 买180码.

   


### 三. 初始化及数据结构:

![PoolArena Structure](./images/3.PooledByteBufAllocator/2.DataStructure-4.PoolArena.png)

1. 初始化方法与数据结构: 

   > - 图中标号: **1**. PoolArena继承自SizeClasses, 这样使用SizeClasses中的码表进行标准化.
   > - 图中标号: **2**. 取自SizeClasses中的nSubpages, 共享空间都有那些尺码.
   > - 图中标号: **3, 4, 5, 6**. 共享空间下每种尺码, 都创建了一个链表来管理同等尺码下的共享空间, 默认都是有head头.
   > - 图中标号: **7**. 这一幛楼里的每一层, 按楼层的使用率分级到qInit, q000, q100等6个分级下.

### 四. 分配与回收方法:

1. 



> 1. 